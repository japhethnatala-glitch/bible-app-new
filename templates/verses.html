{% extends "base.html" %}

{% block title %}All Verses ({{ translation }}) | Bible App{% endblock %}

{% block content %}
<h1>All Verses - {{ translation }}</h1>

<!-- ✅ Search bar -->
<input type="text" id="verseSearch" placeholder="Search by book, chapter, or verse..." class="form-control mb-3">

<!-- ✅ Verse list -->
<ul id="versesList">
  {% for verse in verses %}
    <li>{{ verse|safe }}</li>
  {% endfor %}
</ul>

<!-- ✅ Switch translation links -->
<p class="mt-3">
  Switch translation:
  <a href="{{ url_for('verses', translation='KJV') }}">KJV</a> |
  <a href="{{ url_for('verses', translation='WEB') }}">WEB</a>
</p>

<!-- ✅ Script to filter verses -->
<script>
  document.getElementById('verseSearch').addEventListener('keyup', function() {
    var filter = this.value.toLowerCase().trim();
    var verses = document.querySelectorAll('#versesList li');

    verses.forEach(function(verse) {
      var text = verse.innerText.toLowerCase();

      // ✅ Match book, chapter, and verse
      if (text.includes(filter)) {
        verse.style.display = '';
      } else {
        verse.style.display = 'none';
      }
    });
  });
</script>
{% endblock %}
